<script>
    const countDisplay = document.getElementById('like-count');
    const heartIcon = document.getElementById('heart-icon');
    const key = "meliqoziyev_uz_likes"; // Sizning saytingiz uchun maxsus kalit

    // Umumiy layklar sonini olish
    fetch(`https://api.countapi.xyz/get/trading0911/${key}`)
        .then(res => res.json())
        .then(data => {
            countDisplay.innerText = data.value || 0;
        })
        .catch(() => countDisplay.innerText = 0);

    function toggleLike() {
        let isLiked = localStorage.getItem('isLiked') === 'true';

        if (!isLiked) {
            // Layk qo'shish (API orqali)
            fetch(`https://api.countapi.xyz/hit/trading0911/${key}`)
                .then(res => res.json())
                .then(data => {
                    countDisplay.innerText = data.value;
                    heartIcon.classList.add('liked');
                    localStorage.setItem('isLiked', 'true');
                });
        } else {
            // Bir marta bosgan odam boshqa bosa olmaydi (yoki shunchaki xabar)
            alert("Siz allaqachon layk bosgansiz!");
        }
    }

    // Agar oldin bosgan bo'lsa, yurakni qizil qilib qo'yish
    if (localStorage.getItem('isLiked') === 'true') {
        heartIcon.classList.add('liked');
    }
</script>
