<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meliqoziyev | Portfolio</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            margin: 0;
            font-family: 'Segoe UI', Roboto, sans-serif;
            background-color: #0d1117;
            color: #ffffff;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            overflow: hidden;
            touch-action: none; /* Mobil qurilmalarda sochratish effekti yaxshi ishlashi uchun */
        }

        /* FON ANIMATSIYASI */
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .container { 
            width: 90%; 
            max-width: 450px; 
            text-align: center; 
            padding: 50px 20px;
            z-index: 1;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            font-family: monospace;
            font-size: 14px; /* Kattaroq qildim */
            color: #8b949e;
            margin-bottom: 40px;
        }

        .avatar { 
            width: 120px; height: 120px; /* Kattaroq avatar */
            background: rgba(22, 27, 34, 0.8); 
            border-radius: 50%; 
            margin: 0 auto 20px; 
            display: flex; align-items: center; justify-content: center; 
            font-size: 50px; 
            border: 3px solid #30363d;
            box-shadow: 0 0 30px rgba(88, 166, 255, 0.2);
        }

        h1 { margin: 0; font-size: 32px; font-weight: 800; } /* Ism kattaroq */

        #typing { 
            color: #58a6ff; 
            font-family: 'Courier New', monospace; 
            font-weight: bold; 
            margin: 15px 0; 
            min-height: 25px; 
            font-size: 20px; /* Matn kattaroq */
        }

        .quote {
            color: #8b949e; 
            font-size: 18px; /* Ma'no yozuvi kattaroq */
            margin: 25px 0;
            line-height: 1.6;
        }

        .card { 
            background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1); 
            border-radius: 16px; 
            padding: 20px; 
            margin-bottom: 15px; 
            text-decoration: none;
            color: inherit;
            display: block;
            transition: 0.3s;
            font-size: 18px; /* Kartochka yozuvi kattaroq */
            font-weight: 500;
        }

        .card:hover { border-color: #58a6ff; transform: scale(1.02); }

        /* INSTA LIKE STYLE */
        .like-box {
            margin-top: 40px;
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .heart {
            font-size: 60px; /* Yurakcha kattaroq */
            color: white;
            transition: 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.2));
        }

        .heart.active {
            color: #ed4956;
            transform: scale(1.2);
            filter: drop-shadow(0 0 15px rgba(237, 73, 86, 0.5));
        }

        .count { font-weight: bold; font-size: 24px; margin-top: 10px; }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.4); }
            100% { transform: scale(1.2); }
        }
        .pop-anim { animation: pop 0.3s ease-in-out; }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>

    <div class="container">
        <div class="header-top">
            <span id="display-ip">IP: Detecting...</span>
            <span id="display-time">00:00:00</span>
        </div>

        <div class="avatar">ü•∑</div>
        <h1>meliqoziyev.uz</h1>
        <div id="typing"></div>
        
        <p class="quote">
            Ba'zilar muammoni ko'radi, men esa uni <br>
            <span style="color:#58a6ff; font-weight: bold;">kod bilan</span> yechaman.
        </p>

        <a href="https://youtube.com/@uzclaver_official?si=4BUpX0H6P160Nm1U" target="_blank" class="card">
            ‚ñ∂Ô∏è Ilk hamkorim: UzClaver Official
        </a>

        <div class="like-box" onclick="sendLike()">
            <span class="heart" id="heart-icon">‚ù§Ô∏è</span>
            <span class="count" id="like-count">0</span>
        </div>
    </div>

    <script>
        // 1. FIREBASE CONFIG (O'zingiznikini bu yerga qo'ying)
        const firebaseConfig = {
            apiKey: "AIzaSy...", // Firebase'dan olingan kalit
            databaseURL: "https://loyiha-nomi.firebaseio.com",
            projectId: "loyiha-nomi",
            appId: "1:..."
        };

        // Firebase-ni tekshirish va ulash
        if(firebaseConfig.apiKey !== "AIzaSy...") {
            firebase.initializeApp(firebaseConfig);
            const db = firebase.database();
            const likesRef = db.ref('global_likes');

            likesRef.on('value', (snap) => {
                document.getElementById('like-count').innerText = snap.val() || 0;
            });

            window.sendLike = function() {
                const h = document.getElementById('heart-icon');
                h.classList.add('active', 'pop-anim');
                likesRef.transaction(c => (c || 0) + 1);
                setTimeout(() => h.classList.remove('pop-anim'), 300);
            }
        } else {
            // Firebase yo'q bo'lsa oddiy ishlaydi
            let localLikes = 350;
            document.getElementById('like-count').innerText = localLikes;
            window.sendLike = function() {
                localLikes++;
                document.getElementById('like-count').innerText = localLikes;
                const h = document.getElementById('heart-icon');
                h.classList.add('active', 'pop-anim');
                setTimeout(() => h.classList.remove('pop-anim'), 300);
            }
        }

        // 2. QOR VA SOCHRATISH (ANIMATSIYA)
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let snow = [], splash = [];

        class Snowflake {
            constructor() { this.reset(); }
            reset() { 
                this.x = Math.random() * canvas.width; 
                this.y = Math.random() * canvas.height; 
                this.s = Math.random() * 3 + 1; 
                this.v = Math.random() * 1 + 0.5; 
            }
            update() { this.y += this.v; if (this.y > canvas.height) { this.y = -10; this.x = Math.random() * canvas.width; } }
            draw() { ctx.fillStyle = "rgba(255, 255, 255, 0.6)"; ctx.beginPath(); ctx.arc(this.x, this.y, this.s, 0, Math.PI*2); ctx.fill(); }
        }

        class Spark {
            constructor(x, y) { 
                this.x = x; this.y = y; 
                this.vX = Math.random()*6-3; this.vY = Math.random()*6-3; 
                this.a = 1; this.c = `hsl(${Math.random()*360}, 80%, 60%)`; 
            }
            update() { this.x += this.vX; this.y += this.vY; this.a -= 0.02; }
            draw() { ctx.globalAlpha = this.a; ctx.fillStyle = this.c; ctx.beginPath(); ctx.arc(this.x, this.y, 4, 0, Math.PI*2); ctx.fill(); ctx.globalAlpha = 1; }
        }

        for(let i=0; i<80; i++) snow.push(new Snowflake());

        function loop() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            snow.forEach(s => { s.update(); s.draw(); });
            splash.forEach((s, i) => { s.update(); s.draw(); if(s.a<=0) splash.splice(i,1); });
            requestAnimationFrame(loop);
        }

        // Ekranga tekkanda sochratish
        window.addEventListener('pointerdown', (e) => { 
            for(let i=0; i<12; i++) splash.push(new Spark(e.clientX, e.clientY)); 
        });

        // 3. JONLI SOAT VA IP
        setInterval(() => {
            document.getElementById('display-time').innerText = new Date().toLocaleTimeString();
        }, 1000);

        fetch('https://api.ipify.org?format=json')
            .then(res => res.json())
            .then(data => document.getElementById('display-ip').innerText = "IP: " + data.ip);

        // 4. TYPING EFFECT (Kattaroq matn)
        const text = "Cyber Security Specialist_";
        let idx = 0;
        function type() {
            if(idx < text.length) {
                document.getElementById('typing').innerHTML += text.charAt(idx);
                idx++; setTimeout(type, 120);
            }
        }

        loop(); type();
        window.onresize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; };
    </script>
</body>
</html>
